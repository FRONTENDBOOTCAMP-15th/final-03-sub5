# ì‹œìŠ¤í…œ ì„¤ê³„ì„œ

## 1. ë¬¸ì„œ ëª©ì 

ë³¸ ë¬¸ì„œëŠ” ê²Œì‹œíŒ ì•±ì˜ ì‹¤ì œ ì½”ë“œ êµ¬ì¡°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‹œìŠ¤í…œ êµ¬ì„±ê³¼ ë°ì´í„° íë¦„ì„ ì •ë¦¬í•œë‹¤.

## 2. ê¸°ìˆ  ìŠ¤íƒ

- Frontend: React + Next.js(App Router)
- UI: Tailwind CSS
- ìƒíƒœ ê´€ë¦¬: Zustand(sessionStorage persist)
- ì„œë²„ í†µì‹ : Fetch + Next Server Actions
- ìºì‹œ/ê°±ì‹ : `fetch` ìºì‹œ íƒœê·¸ + `updateTag`, `revalidatePath`

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

- App Router ê¸°ë°˜ìœ¼ë¡œ ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¼í•© êµ¬ì„±
- ê²Œì‹œê¸€ ëª©ë¡/ìƒì„¸/ëŒ“ê¸€ì€ ì„œë²„ì—ì„œ ì¡°íšŒí•˜ê³  ìºì‹œ íƒœê·¸ë¡œ ê´€ë¦¬
- ìƒì„±/ìˆ˜ì •/ì‚­ì œëŠ” Server Actionì—ì„œ API í˜¸ì¶œ í›„ ê°±ì‹ 
- ì¸ì¦ ìƒíƒœëŠ” Zustandë¡œ ê´€ë¦¬í•˜ê³  sessionStorageì— ì €ì¥

## 4. ì£¼ìš” êµ¬ì„± ìš”ì†Œ

- ë¼ìš°íŒ…: ë¡œê·¸ì¸/íšŒì›ê°€ì…, ê²Œì‹œíŒ ëª©ë¡/ìƒì„¸, ì‘ì„±/ìˆ˜ì •
- ìƒíƒœ ê´€ë¦¬: ì‚¬ìš©ì ì¸ì¦ ì •ë³´, UI ìƒíƒœ
- ë°ì´í„° ì²˜ë¦¬: ê²Œì‹œê¸€/ëŒ“ê¸€ ì¡°íšŒì™€ CUD ì²˜ë¦¬

## 5. ë°ì´í„° íë¦„

1. ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ëª©ë¡/ìƒì„¸ ë°ì´í„° ì¡°íšŒ
2. í¼ ì œì¶œ ì‹œ Server Actionì—ì„œ API í˜¸ì¶œ
3. ì„±ê³µ ì‹œ ìºì‹œ ê°±ì‹  í›„ í˜ì´ì§€ ì´ë™
4. ë¡œê·¸ì¸ ì„±ê³µ ì‹œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì €ì¥

## 6. í™˜ê²½ ë³€ìˆ˜/ì—°ë™

- `NEXT_PUBLIC_API_URL`, `NEXT_PUBLIC_CLIENT_ID` ì‚¬ìš©
- ëª¨ë“  API ìš”ì²­ì— `Client-Id` í—¤ë” í¬í•¨
- ì¸ì¦ APIëŠ” `Authorization: Bearer <token>` ì‚¬ìš©

## 7. ë³´ì•ˆ ë° ì •ì±…

- ì¸ì¦ í•„ìš” ê¸°ëŠ¥ì€ ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì ‘ê·¼
- ì‘ì„±/ìˆ˜ì •/ì‚­ì œëŠ” ì‘ì„±ìë§Œ ê°€ëŠ¥(ì„œë²„ ê²€ì¦ ê¸°ì¤€)
- í† í°ì€ sessionStorageì— ì €ì¥(ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ì œê±°)

# ì‹œìŠ¤í…œ ì„¤ê³„ì„œ - ì„œë¸Œ5 (Sub5)

## 1. ë¬¸ì„œ ëª©ì 

ë³¸ ë¬¸ì„œëŠ” ëŸ¬ë‹ ê¸°ë¡ ê´€ë¦¬ ì›¹ì•± "ì„œë¸Œ5"ì˜ ì‹œìŠ¤í…œ êµ¬ì„±, ê¸°ìˆ  ìŠ¤íƒ, ë°ì´í„° íë¦„, í´ë” êµ¬ì¡°ë¥¼ ì •ì˜í•œë‹¤. ê°œë°œíŒ€ ì „ì²´ê°€ ì¼ê´€ëœ ì•„í‚¤í…ì²˜ ê¸°ì¤€ìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆë„ë¡ ê°€ì´ë“œë¥¼ ì œê³µí•œë‹¤.

---

## 2. ê¸°ìˆ  ìŠ¤íƒ

### 2.1 Frontend

- Frontend: React + Next.js(App Router)
- UI: Tailwind CSS
- ìƒíƒœ ê´€ë¦¬: Zustand(sessionStorage persist)
- ì„œë²„ í†µì‹ : Fetch + Next Server Actions
- ìºì‹œ/ê°±ì‹ : `fetch` ìºì‹œ íƒœê·¸ + `updateTag`, `revalidatePath`

### 2.2 Backend & API
- **ì„œë²„**: ë¶€íŠ¸ìº í”„ ì œê³µ ì„œë²„ API
- **í†µì‹ **: Fetch API + Next.js Server Actions
- **ì¸ì¦**: JWT (Bearer Token)
- **ìºì‹œ/ê°±ì‹ **: 
  - `fetch` ìºì‹œ íƒœê·¸ (`next: { tags }`)
  - `revalidatePath`, `updateTag` (ìºì‹œ ë¬´íš¨í™”)

### 2.3 ê°œë°œ ë„êµ¬
- **íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €**: npm
- **ì½”ë“œ í’ˆì§ˆ**: ESLint 9, Prettier
- **Git Hooks**: Husky + lint-staged
- **ë²„ì „ ê´€ë¦¬**: Git + GitHub

### 2.4 ë°°í¬
- **í”Œë«í¼**: Vercel (ì¶”ì²œ)
- **í™˜ê²½ ë³€ìˆ˜**: 
  - `NEXT_PUBLIC_API_URL`: ë¶€íŠ¸ìº í”„ ì„œë²„ API URL
  - `NEXT_PUBLIC_CLIENT_ID`: í´ë¼ì´ì–¸íŠ¸ ID

---

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1 ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Client (Browser)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  React Components                 â”‚  â”‚
â”‚  â”‚  - Server Components (RSC)        â”‚  â”‚
â”‚  â”‚  - Client Components              â”‚  â”‚
â”‚  â”‚  - Server Actions                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â†•                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  State Management (Zustand)       â”‚  â”‚
â”‚  â”‚  - User Store (sessionStorage)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†• HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ë¶€íŠ¸ìº í”„ ì„œë²„ API                  â”‚
â”‚  - ì‚¬ìš©ì ì¸ì¦ (JWT)                    â”‚
â”‚  - ëŸ¬ë‹ ê¸°ë¡ CRUD                       â”‚
â”‚  - ë°ì´í„° ì €ì¥ (DB)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

**Server Components (RSC):**
- ë°ì´í„° í˜ì¹­ (ê²Œì‹œê¸€ ëª©ë¡/ìƒì„¸)
- SEO ìµœì í™” (ë©”íƒ€ë°ì´í„°)
- ìºì‹œ ê´€ë¦¬

**Client Components:**
- í¼ ì…ë ¥ (useActionState)
- ì‚¬ìš©ì ì¸í„°ë™ì…˜
- ìƒíƒœ ê´€ë¦¬ (Zustand)

**Server Actions:**
- í¼ ì œì¶œ ì²˜ë¦¬
- API í˜¸ì¶œ
- ìºì‹œ ê°±ì‹ 

---

## 4. í´ë” êµ¬ì¡°

```
ğŸ“¦ ì„œë¸Œ5 í”„ë¡œì íŠ¸
â”œâ”€â”€ ğŸ“ action/
â”‚   â”œâ”€â”€ ğŸ“„ record.ts          # ëŸ¬ë‹ ê¸°ë¡ CRUD Server Actions
â”‚   â””â”€â”€ ğŸ“„ user.ts            # ì‚¬ìš©ì ì¸ì¦ Server Actions
â”‚
â”œâ”€â”€ ğŸ“ app/
â”‚   â”œâ”€â”€ ğŸ“ (auth)/            # ë¼ìš°íŠ¸ ê·¸ë£¹ (URLì— ì˜í–¥ ì—†ìŒ)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ login/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ LoginForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”‚   â””â”€â”€ ğŸ“ signup/
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ SignupForm.tsx
â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ records/           # ëŸ¬ë‹ ê¸°ë¡ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ ğŸ“ [id]/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ edit/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx        # ê¸°ë¡ ìˆ˜ì •
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx            # ê¸°ë¡ ìƒì„¸
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ new/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ AddRecordForm.tsx   # ê¸°ë¡ ì¶”ê°€ í¼
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx            # ê¸°ë¡ ì¶”ê°€ í˜ì´ì§€
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ RecordItem.tsx          # ê¸°ë¡ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ RecordChart.tsx         # ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ RecordStats.tsx         # í†µê³„ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx                # ë©”ì¸ ëŒ€ì‹œë³´ë“œ
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ goals/             # ëª©í‘œ ì„¤ì • (3ìˆœìœ„)
â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ profile/           # ë§ˆì´í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ ğŸ“ edit/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ error.tsx          # ì „ì—­ ì—ëŸ¬ í˜ì´ì§€
â”‚   â”œâ”€â”€ ğŸ“„ globals.css        # ì „ì—­ ìŠ¤íƒ€ì¼
â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx         # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ ğŸ“„ loading.tsx        # ì „ì—­ ë¡œë”© í˜ì´ì§€
â”‚   â”œâ”€â”€ ğŸ“„ not-found.tsx      # 404 í˜ì´ì§€
â”‚   â””â”€â”€ ğŸ“„ page.tsx           # í™ˆ í˜ì´ì§€
â”‚
â”œâ”€â”€ ğŸ“ components/
â”‚   â””â”€â”€ ğŸ“ common/
â”‚       â”œâ”€â”€ ğŸ“ ui/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ Button.tsx
â”‚       â”‚   â””â”€â”€ ğŸ“„ buttonStyle.ts
â”‚       â”œâ”€â”€ ğŸ“„ CustomError.tsx
â”‚       â”œâ”€â”€ ğŸ“„ Footer.tsx
â”‚       â”œâ”€â”€ ğŸ“„ Header.tsx
â”‚       â””â”€â”€ ğŸ“„ BottomNav.tsx   # í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (ëª¨ë°”ì¼)
â”‚
â”œâ”€â”€ ğŸ“ lib/
â”‚   â”œâ”€â”€ ğŸ“„ record.ts          # ëŸ¬ë‹ ê¸°ë¡ API í˜¸ì¶œ í•¨ìˆ˜
â”‚   â”œâ”€â”€ ğŸ“„ weather.ts         # ë‚ ì”¨ API í˜¸ì¶œ í•¨ìˆ˜
â”‚   â””â”€â”€ ğŸ“„ file.ts            # íŒŒì¼ ì—…ë¡œë“œ í•¨ìˆ˜
â”‚
â”œâ”€â”€ ğŸ“ utils/
â”‚   â”œâ”€â”€ ğŸ“„ pace.ts            # í˜ì´ìŠ¤ ê³„ì‚° í•¨ìˆ˜
â”‚   â”œâ”€â”€ ğŸ“„ date.ts            # ë‚ ì§œ í¬ë§· í•¨ìˆ˜
â”‚   â””â”€â”€ ğŸ“„ validation.ts      # ìœ íš¨ì„± ê²€ì¦ í•¨ìˆ˜
â”‚
â”œâ”€â”€ ğŸ“ types/
â”‚   â”œâ”€â”€ ğŸ“„ index.ts           # íƒ€ì… export
â”‚   â”œâ”€â”€ ğŸ“„ api.ts             # API ì‘ë‹µ íƒ€ì…
â”‚   â”œâ”€â”€ ğŸ“„ record.ts          # ëŸ¬ë‹ ê¸°ë¡ íƒ€ì…
â”‚   â””â”€â”€ ğŸ“„ user.ts            # ì‚¬ìš©ì íƒ€ì…
â”‚
â”œâ”€â”€ ğŸ“ zustand/
â”‚   â””â”€â”€ ğŸ“„ userStore.ts       # ì‚¬ìš©ì ì „ì—­ ìƒíƒœ
â”‚
â”œâ”€â”€ ğŸ“ public/
â”‚   â””â”€â”€ ğŸ“ images/
â”‚       â”œâ”€â”€ favicon.svg
â”‚       â””â”€â”€ logo.png
â”‚
â”œâ”€â”€ ğŸ“„ .env.local             # í™˜ê²½ ë³€ìˆ˜
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ eslint.config.mjs
â”œâ”€â”€ ğŸ“„ next.config.ts
â”œâ”€â”€ ğŸ“„ package.json
â”œâ”€â”€ ğŸ“„ postcss.config.mjs
â”œâ”€â”€ ğŸ“„ README.md
â”œâ”€â”€ ğŸ“„ tailwind.config.ts
â””â”€â”€ ğŸ“„ tsconfig.json
```

---

## 5. ë°ì´í„° íë¦„

### 5.1 ê¸°ë¡ ì¡°íšŒ (Read)

```
1. ì‚¬ìš©ìê°€ í˜ì´ì§€ ì§„ì… (/records)
   â†“
2. Server Componentì—ì„œ ë°ì´í„° í˜ì¹­
   - lib/record.tsì˜ getRecords() í˜¸ì¶œ
   - fetch with cache tags
   â†“
3. ë¶€íŠ¸ìº í”„ ì„œë²„ API ìš”ì²­
   - GET /api/records
   - Authorization: Bearer {token}
   â†“
4. ì„œë²„ ì‘ë‹µ (RecordListRes)
   â†“
5. ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
   - RecordItem ì»´í¬ë„ŒíŠ¸ë¡œ ëª©ë¡ í‘œì‹œ
```

### 5.2 ê¸°ë¡ ì¶”ê°€ (Create)

```
1. ì‚¬ìš©ìê°€ í¼ ì…ë ¥ (/records/new)
   - Client Component (AddRecordForm)
   â†“
2. ì €ì¥ ë²„íŠ¼ í´ë¦­
   - useActionStateë¡œ Server Action í˜¸ì¶œ
   â†“
3. Server Action (action/record.tsì˜ createRecord)
   - FormData íŒŒì‹±
   - accessToken í¬í•¨
   - API ìš”ì²­ (POST /api/records)
   â†“
4. ë¶€íŠ¸ìº í”„ ì„œë²„ API ì‘ë‹µ
   â†“
5. ì„±ê³µ ì‹œ:
   - updateTagë¡œ ìºì‹œ ë¬´íš¨í™”
   - redirectë¡œ ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™
   ì‹¤íŒ¨ ì‹œ:
   - ì—ëŸ¬ ìƒíƒœ ë°˜í™˜
   - í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
```

### 5.3 ì‚¬ìš©ì ì¸ì¦ íë¦„

```
1. ë¡œê·¸ì¸ í¼ ì œì¶œ
   â†“
2. Server Action (action/user.tsì˜ login)
   - POST /api/users/login
   â†“
3. ì„±ê³µ ì‹œ ì„œë²„ ì‘ë‹µ
   - accessToken, refreshToken í¬í•¨
   â†“
4. Client Component (LoginForm)
   - useEffectì—ì„œ userState í™•ì¸
   - Zustandì˜ setUser í˜¸ì¶œ
   - sessionStorageì— ì €ì¥
   - ëª©ë¡ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
```

---

## 6. ì£¼ìš” êµ¬ì„± ìš”ì†Œ

### 6.1 ë¼ìš°íŒ…

| ê²½ë¡œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `/` | Server | í™ˆ |
| `/login` | Server | ë¡œê·¸ì¸ í˜ì´ì§€ (LoginFormì€ Client) |
| `/signup` | Server | íšŒì›ê°€ì… í˜ì´ì§€ (SignupFormì€ Client) |
| `/records` | Server | ê¸°ë¡ ë©”ì¸ ëŒ€ì‹œë³´ë“œ |
| `/records/new` | Server | ê¸°ë¡ ì¶”ê°€ (AddRecordFormì€ Client) |
| `/records/[id]` | Server | ê¸°ë¡ ìƒì„¸ (ë™ì  ë¼ìš°íŒ…) |
| `/records/[id]/edit` | Server | ê¸°ë¡ ìˆ˜ì • |
| `/profile` | Server | ë§ˆì´í˜ì´ì§€ |

### 6.2 ìƒíƒœ ê´€ë¦¬

**Zustand (ì „ì—­ ìƒíƒœ):**
```typescript
// zustand/userStore.ts
interface UserStoreState {
  user: User | null;
  setUser: (user: User) => void;
  resetUser: () => void;
}
```

**ìš©ë„:**
- ì‚¬ìš©ì ì¸ì¦ ì •ë³´ (ì´ë©”ì¼, ì´ë¦„, í† í°)
- ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
- sessionStorage persist (ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ì‚­ì œ)

### 6.3 ë°ì´í„° íƒ€ì…

**ëŸ¬ë‹ ê¸°ë¡ (RunningRecord):**
```typescript
interface RunningRecord {
  _id: number;
  userId: number;
  date: string;                // "2026-01-19"
  distance: number;            // km
  timeRecord: {
    hour: number;
    min: number;
    sec: number;
  };
  recordType: "running" | "walking" | "jogging" | "trekking" | "treadmill";
  calorie?: number;
  place?: string;
  memo?: string;
  createdAt: string;
  updatedAt: string;
}
```

---

## 7. API ì—°ë™

### 7.1 ìš”ì²­ êµ¬ì¡°

**ê³µí†µ í—¤ë”:**
```typescript
{
  "Content-Type": "application/json",
  "Client-Id": process.env.NEXT_PUBLIC_CLIENT_ID,
  "Authorization": `Bearer ${accessToken}`  // ì¸ì¦ í•„ìš” ì‹œ
}
```

**ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:**

| Method | Endpoint | ì„¤ëª… | ì¸ì¦ |
|--------|----------|------|------|
| POST | `/users/login` | ë¡œê·¸ì¸ | âŒ |
| POST | `/users` | íšŒì›ê°€ì… | âŒ |
| GET | `/records` | ê¸°ë¡ ëª©ë¡ ì¡°íšŒ | âœ… |
| GET | `/records/:id` | ê¸°ë¡ ìƒì„¸ ì¡°íšŒ | âœ… |
| POST | `/records` | ê¸°ë¡ ì¶”ê°€ | âœ… |
| PUT | `/records/:id` | ê¸°ë¡ ìˆ˜ì • | âœ… |
| DELETE | `/records/:id` | ê¸°ë¡ ì‚­ì œ | âœ… |

### 7.2 ì‘ë‹µ êµ¬ì¡°

**ì„±ê³µ ì‘ë‹µ:**
```typescript
// ëª©ë¡ ì¡°íšŒ
{
  ok: 1,
  item: RunningRecord[]
}

// ìƒì„¸ ì¡°íšŒ/ìƒì„±/ìˆ˜ì •
{
  ok: 1,
  item: RunningRecord
}
```

**ì—ëŸ¬ ì‘ë‹µ:**
```typescript
{
  ok: 0,
  message: string,
  errors?: {
    [fieldName: string]: {
      msg: string;
    }
  }
}
```

### 7.3 ìºì‹œ ì „ëµ

**ìºì‹œ íƒœê·¸ ì‚¬ìš©:**
```typescript
// lib/record.ts
export async function getRecords() {
  const res = await fetch(`${API_URL}/records`, {
    headers: { "Client-Id": CLIENT_ID },
    cache: "force-cache",
    next: {
      tags: ["records"]  // ğŸ‘ˆ ìºì‹œ íƒœê·¸
    }
  });
  return res.json();
}
```

**ìºì‹œ ë¬´íš¨í™”:**
```typescript
// action/record.ts
export async function createRecord(formData) {
  // ... API í˜¸ì¶œ ...
  
  if (data.ok) {
    updateTag("records");  // ğŸ‘ˆ ìºì‹œ ë¬´íš¨í™”
    redirect("/records");
  }
}
```

---

## 8. ë³´ì•ˆ ë° ì •ì±…

### 8.1 ì¸ì¦ (Authentication)

- **ë°©ì‹**: JWT (JSON Web Token)
- **ì €ì¥**: sessionStorage (ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ìë™ ì‚­ì œ)
- **ì „ì†¡**: Authorization Bearer í—¤ë”

### 8.2 ê¶Œí•œ (Authorization)

- ë¡œê·¸ì¸ í•„ìš” ê¸°ëŠ¥:
  - ê¸°ë¡ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ
  - í†µê³„ ì¡°íšŒ
  
- ë³¸ì¸ í™•ì¸:
  - ê¸°ë¡ ìˆ˜ì •/ì‚­ì œëŠ” ì‘ì„±ì(userId)ë§Œ ê°€ëŠ¥
  - ì„œë²„ì—ì„œ ê²€ì¦

### 8.3 ë°ì´í„° ê²€ì¦

**í´ë¼ì´ì–¸íŠ¸ ê²€ì¦ (ì‹¤ì‹œê°„ í”¼ë“œë°±):**
- í•„ìˆ˜ í•­ëª© í™•ì¸
- ë‚ ì§œ: ë¯¸ë˜ ë¶ˆê°€
- ê±°ë¦¬: 0.1~200km
- ì‹œê°„: 1ë¶„~24ì‹œê°„

**ì„œë²„ ê²€ì¦ (ìµœì¢…):**
- ë¶€íŠ¸ìº í”„ ì„œë²„ì—ì„œ ê²€ì¦
- ì—ëŸ¬ ì‘ë‹µ â†’ í´ë¼ì´ì–¸íŠ¸ì—ì„œ í‘œì‹œ

### 8.4 í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ

```bash
# .env.local (Gitì— ì»¤ë°‹ ì•ˆ í•¨)
NEXT_PUBLIC_API_URL=https://api.example.com
NEXT_PUBLIC_CLIENT_ID=your-client-id
```

---

## 9. ì„±ëŠ¥ ìµœì í™”

### 9.1 ìºì‹±

- Server Component ë°ì´í„° í˜ì¹­ ìºì‹œ
- ìºì‹œ íƒœê·¸ë¡œ ì„ íƒì  ë¬´íš¨í™”
- `revalidatePath` / `updateTag` í™œìš©

### 9.2 ì´ë¯¸ì§€ ìµœì í™”

- Next.js Image ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
- ìë™ ìµœì í™” (WebP ë³€í™˜, lazy loading)

### 9.3 ì½”ë“œ ë¶„í• 

- ë™ì  import (`next/dynamic`)
- ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í•„ìš”í•  ë•Œë§Œ ë¡œë“œ

### 9.4 ë²ˆë“¤ ìµœì í™”

- Tree shaking
- ë¶ˆí•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œê±°
- `next build` ì‹œ ìë™ ìµœì í™”

---

## 10. ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ

### 10.1 ë ˆë²¨ë³„ ì—ëŸ¬ ì²˜ë¦¬

**1ë‹¨ê³„: ì»´í¬ë„ŒíŠ¸ ë ˆë²¨**
```typescript
try {
  // API í˜¸ì¶œ
} catch (error) {
  return { ok: 0, message: "ì¼ì‹œì ì¸ ì˜¤ë¥˜" };
}
```

**2ë‹¨ê³„: í˜ì´ì§€ ë ˆë²¨**
```tsx
// app/records/error.tsx
export default function ErrorPage({ error }) {
  return <CustomError message={error.message} />;
}
```

**3ë‹¨ê³„: ì „ì—­ ë ˆë²¨**
```tsx
// app/error.tsx
export default function GlobalError({ error }) {
  return <CustomError message="ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜" />;
}
```

### 10.2 ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬

- íƒ€ì„ì•„ì›ƒ: 10ì´ˆ
- ì¬ì‹œë„ ë²„íŠ¼ ì œê³µ
- ì˜¤í”„ë¼ì¸ ê°ì§€ (ì„ íƒ)

### 10.3 ì¸ì¦ ì—ëŸ¬

- 401 (Unauthorized): ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- 403 (Forbidden): ê¶Œí•œ ì—†ìŒ ë©”ì‹œì§€

---

## 11. í…ŒìŠ¤íŠ¸ ì „ëµ (ì„ íƒ)

### 11.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- ìœ í‹¸ í•¨ìˆ˜ (í˜ì´ìŠ¤ ê³„ì‚°, ë‚ ì§œ í¬ë§·)
- Vitest ë˜ëŠ” Jest

### 11.2 í†µí•© í…ŒìŠ¤íŠ¸
- Server Actions
- API ì—°ë™

### 11.3 E2E í…ŒìŠ¤íŠ¸
- Playwright ë˜ëŠ” Cypress
- ì£¼ìš” ì‚¬ìš©ì í”Œë¡œìš°

---

## 12. ë°°í¬ ì „ëµ

### 12.1 Vercel ë°°í¬

**ìë™ ë°°í¬:**
```
main ë¸Œëœì¹˜ push â†’ ìë™ ë°°í¬
```

**í™˜ê²½ ë³€ìˆ˜ ì„¤ì •:**
- Vercel ëŒ€ì‹œë³´ë“œì—ì„œ ì„¤ì •
- NEXT_PUBLIC_API_URL
- NEXT_PUBLIC_CLIENT_ID

### 12.2 ë¹Œë“œ ìµœì í™”

```bash
# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# ë¹Œë“œ ê²°ê³¼ í™•ì¸
npm run start
```

---

## 13. ê°œë°œ í™˜ê²½ ì„¤ì •

### 13.1 í•„ìˆ˜ ì„¤ì¹˜

```bash
# Node.js 20 ì´ìƒ
node -v

# í”„ë¡œì íŠ¸ ì´ˆê¸°í™”
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

### 13.2 í™˜ê²½ ë³€ìˆ˜

```bash
# .env.local ìƒì„±
NEXT_PUBLIC_API_URL=ë¶€íŠ¸ìº í”„_ì„œë²„_URL
NEXT_PUBLIC_CLIENT_ID=í´ë¼ì´ì–¸íŠ¸_ID
```

### 13.3 ì½”ë“œ í’ˆì§ˆ ë„êµ¬

```bash
# ESLint ì‹¤í–‰
npm run lint

# Prettier ì‹¤í–‰ (ì„¤ì • ì‹œ)
npm run format
```

---

## 14. íŒ€ í˜‘ì—… ê·œì¹™

### 14.1 Git ë¸Œëœì¹˜ ì „ëµ

```
main (í”„ë¡œë•ì…˜)
  â†“
develop (ê°œë°œ)
  â†“
feature/ê¸°ëŠ¥ëª… (ê¸°ëŠ¥ ê°œë°œ)
```

### 14.2 ì»¤ë°‹ ì»¨ë²¤ì…˜

```
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
fix: ë²„ê·¸ ìˆ˜ì •
docs: ë¬¸ì„œ ìˆ˜ì •
style: ì½”ë“œ í¬ë§·íŒ…
refactor: ë¦¬íŒ©í† ë§
test: í…ŒìŠ¤íŠ¸ ì¶”ê°€
chore: ë¹Œë“œ, ì„¤ì • ë³€ê²½
```

### 14.3 PR ê·œì¹™

- ìµœì†Œ 1ëª… ë¦¬ë·° + Approve
- CI í†µê³¼ í™•ì¸
- Squash and Merge

---

## 15. ìœ ì§€ë³´ìˆ˜ ê³„íš

### 15.1 ëª¨ë‹ˆí„°ë§

- Vercel Analytics (ì„ íƒ)
- ì—ëŸ¬ ì¶”ì  (Sentry, ì„ íƒ)

### 15.2 ë¡œê¹…

- ì„œë²„ ì—ëŸ¬ ë¡œê·¸
- í´ë¼ì´ì–¸íŠ¸ console.error

### 15.3 ì—…ë°ì´íŠ¸

- ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ ê´€ë¦¬
- ë³´ì•ˆ íŒ¨ì¹˜ ì ìš©
